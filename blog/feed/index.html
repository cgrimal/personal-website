<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Les notes de Clément</title>
	<atom:link href="http://clementgrimal.fr/blog/feed/" rel="self" type="application/rss+xml" />
	<link>http://clementgrimal.fr/blog</link>
	<description>Spécialiste de rien // Partageur de tout</description>
	<lastBuildDate>Tue, 24 Dec 2013 00:29:30 +0000</lastBuildDate>
	<language>fr-FR</language>
		<sy:updatePeriod>hourly</sy:updatePeriod>
		<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=3.8.41</generator>
	<item>
		<title>Nouvel hébergement !</title>
		<link>http://clementgrimal.fr/blog/2013/12/24/nouvel-hebergement/</link>
		<comments>http://clementgrimal.fr/blog/2013/12/24/nouvel-hebergement/#comments</comments>
		<pubDate>Tue, 24 Dec 2013 00:29:30 +0000</pubDate>
		<dc:creator><![CDATA[Clément]]></dc:creator>
				<category><![CDATA[Non classé]]></category>
		<category><![CDATA[blog]]></category>
		<category><![CDATA[hebergement]]></category>
		<category><![CDATA[unix]]></category>

		<guid isPermaLink="false">http://clementgrimal.fr/blog/?p=504</guid>
		<description><![CDATA[Bon j&#8217;ai un peu laisser ce blog à l&#8217;abandon&#8230; Il y a eu plusieurs raisons : manque de temps, Raspberry Pi en panne. Je vais essayer de lui donner un second souffle ! Déjà, j&#8217;ai changé de formule d&#8217;hébergement, histoire d&#8217;avoir un peu plus de liberté et d&#8217;avoir mon serveur bac-à-sable à moi. Donc je [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Bon j&rsquo;ai un peu laisser ce blog à l&rsquo;abandon&#8230; Il y a eu plusieurs raisons : manque de temps, Raspberry Pi en panne. Je vais essayer de lui donner un second souffle !</p>
<p>Déjà, j&rsquo;ai changé de formule d&rsquo;hébergement, histoire d&rsquo;avoir un peu plus de liberté et d&rsquo;avoir mon serveur bac-à-sable à moi. Donc je viens juste de passer d&rsquo;un hébergement mutualisé avec nom de domaine géré, à un modeste serveur de la gamme <a title="Kimsufi.com" href="http://www.kimsufi.com/fr/" target="_blank">Kimsufi d&rsquo;OVH</a>, et mon domaine <a title="Clément Grimal" href="http://clementgrimal.fr" target="_blank">clementgrimal.fr</a> est maintenant géré par <a title="Gandi.net" href="https://www.gandi.net/" target="_blank">Gandi</a>. Je pense que ce sera plus confortable d&rsquo;avoir les deux séparés comme ça.</p>
<p>En faisant cette migration, je me suis rendu compte que le service que j&rsquo;avais l&rsquo;habitude de payer pour l&rsquo;hébergement mutualisé était plus important que je ne l&rsquo;imaginé, mais que je pouvais désormais m&rsquo;en passer, car j&rsquo;ai appris à gérer un serveur pour le travail : Nginx, php-fpm, MySQL, etc. J&rsquo;ai repris mon article qui expliquait comment protéger son Raspberry Pi (<a title="Sécuriser son accès SSH" href="http://clementgrimal.fr/blog/2013/02/12/ssh-securite/">Sécuriser son accès SSH</a>), en particulier pour installer Fail2Ban. Bref, pas mal de configuration, mais rien d&rsquo;insurmontable , et au final pas mal de possibilité pour m&rsquo;amuser avec des trucs inaccessibles en hébergement mutualisé : serveur Node.js, cron de tâches (comme la mise à jour de la page sur Darwin <a title="Sur les épaules de Darwin" href="http://clement.grimal.de/darwin/" target="_blank">clement.grimal.de/darwin</a>), etc.</p>
<p>D&rsquo;ailleurs, je voudrais juste profiter de cette article pour expliquer que j&rsquo;ai dû transférer ce blog, et que je n&rsquo;ai pas utilisé les fonctions export/import de WordPress, car j&rsquo;ai fais le changement de DNS un peu vite, et que je n&rsquo;avais donc plus accès à mon blog ! J&rsquo;ai donc fait une copie de tous les fichiers, et un export de la base de données. J&rsquo;ai donc ensuite copier les fichiers dans mon répertoire web, et importer la base de données. J&rsquo;ai donc également configuré un utilisateur MySQL dédié au blog (accès restreint à la base du blog) et modifier le fichier wp-config.php en conséquence, pour la connexion à la base de données. Finalement, mes pages d&rsquo;articles ne fonctionnait pas à cause de la ré-écriture d&rsquo;url, il a fallut que je modifie un peu ma vhost en ajoutant le bloc&nbsp;:</p>
<pre class="brush:other">location /blog/ {
    try_files $uri $uri/ /blog/index.php?$args;
}</pre>
<p>Finalement, si on veut que WordPress puisse faire les mise à jour facilement, on peut le mettre en mode direct en ajoutant dans le fichier wp-config.php les lignes suivantes&nbsp;:</p>
<pre class="brush:php">define( 'FS_METHOD', 'direct' );
define( 'FS_CHMOD_DIR', 0777 );
define( 'FS_CHMOD_FILE', 0777 );</pre>
<p>Voilà, histoire de finir sur quelque chose de concret : je vais enfin pouvoir héberger les épisodes de l&rsquo;émission Sur les épaules de Darwin sur mon serveur !</p>
<h2>Sources</h2>
<ul>
<li>Guide général sur l&rsquo;installation d&rsquo;un blog WordPress avec Nginx&nbsp;: <a href="https://www.digitalocean.com/community/articles/how-to-install-wordpress-with-nginx-on-ubuntu-12-04" target="_blank">https://www.digitalocean.com/community/articles/how-to-install-wordpress-with-nginx-on-ubuntu-12-04</a></li>
<li>Pour mon problème de ré-écriture des urls pour les articles&nbsp;: <a href="http://nginxlibrary.com/wordpress-permalinks/" target="_blank">http://nginxlibrary.com/wordpress-permalinks/</a></li>
<li>Pour que WordPress puisse faire les mise à jour facilement (la réponse est dans les commentaires je crois)&nbsp;: <a href="http://vps2.me/avoid-wordpress-asking-ftp-credentials-when-install-upgrade-plugins/" target="_blank">http://vps2.me/avoid-wordpress-asking-ftp-credentials-when-install-upgrade-plugins/</a></li>
</ul>]]></content:encoded>
			<wfw:commentRss>http://clementgrimal.fr/blog/2013/12/24/nouvel-hebergement/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>Projet &#171;&#160;Sur les épaules de Darwin&#160;&#187;</title>
		<link>http://clementgrimal.fr/blog/2013/03/21/projet-sur-les-epaules-de-darwin/</link>
		<comments>http://clementgrimal.fr/blog/2013/03/21/projet-sur-les-epaules-de-darwin/#comments</comments>
		<pubDate>Thu, 21 Mar 2013 18:30:27 +0000</pubDate>
		<dc:creator><![CDATA[Clément]]></dc:creator>
				<category><![CDATA[Non classé]]></category>
		<category><![CDATA[darwin]]></category>
		<category><![CDATA[git]]></category>
		<category><![CDATA[python]]></category>
		<category><![CDATA[web]]></category>

		<guid isPermaLink="false">http://clementgrimal.fr/blog/?p=477</guid>
		<description><![CDATA[J&#8217;ai déjà parlé de cette superbe émission dans un précédent article, Sur les épaules de Darwin, de Jean-Claude Ameisen, et je ne le referai donc pas ici. J&#8217;avais également parlé de la page que j&#8217;ai créé pour suivre cette émission, et surtout pourvoir ré-écouter ou télécharger des épisodes : http://www.clementgrimal.fr/darwin/. Mais surtout, j&#8217;avais promis de partager la [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>J&rsquo;ai déjà parlé de cette superbe émission dans un précédent article, <a title="Sur les épaules de Darwin" href="http://clementgrimal.fr/blog/2013/01/17/sur-les-epaules-de-darwin/">Sur les épaules de Darwin, de Jean-Claude Ameisen</a>, et je ne le referai donc pas ici. J&rsquo;avais également parlé de la page que j&rsquo;ai créé pour suivre cette émission, et surtout pourvoir ré-écouter ou télécharger des épisodes : <a title="http://www.clementgrimal.fr/darwin/" href="http://www.clementgrimal.fr/darwin/" target="_blank">http://www.clementgrimal.fr/darwin/</a>. Mais surtout, j&rsquo;avais promis de partager la recette qui se cache derrière cette page !</p>
<p>Pour créer cette page, j&rsquo;utilise plusieurs scripts écrits en Python, qui utilisent eux-mêmes un fichier base de données pour stocker toutes les informations sur les épisodes (titre, date de diffusion, &#8230;). Afin de facilement les partager avec tout le monde, j&rsquo;ai donc créé un projet sur le site GitHub : <a href="https://github.com/cgrimal/darwin">https://github.com/cgrimal/darwin</a>. Maintenant, rien ne vous empêche de récupérer intégralement ces scripts, pour vous même créer une page web autour de l&rsquo;émission (merci de me prévenir quand même, ça me fera plaisir !), et même de télécharger les épisodes en mp3.</p>
<p>Non seulement je pense que c&rsquo;est une bonne chose de partager ce genre de projet car je ne compte pas faire de l&rsquo;argent avec, mais en plus, cela m&rsquo;a permis de m&rsquo;initier à git, qui est un système de gestion de version bien pratique !</p>
<h3>Comment télécharger les fichiers mp3 de l&rsquo;émission ?</h3>
<p>En fait, je pense que beaucoup de gens se posent la question, et si vous êtes dans ce cas, je pense modestement pouvoir vous aider. Cependant, pour mieux répondre, il me faut vous poser la question suivante : êtes-vous un informaticien/geek/python-gourou ?</p>
<ul>
<li><strong>Si oui</strong>, vous n&rsquo;avez surement pas besoin de moi, mais si vous ne voulez pas ré-inventer la roue, servez-vous de mon code : darwin_create_database.py pour récupérer les informations (dont les liens directs vers les fichiers mp3), puis darwin_download.py pour télécharger les fichiers.</li>
<li><strong>Sinon</strong>, vous pouvez cliquer sur les liens &laquo;&nbsp;Télécharger&nbsp;&raquo; pour télécharger les émissions une par une, ou alors me demander dans <a href="#reply-title">les commentaires</a> ou directement par mail (<a title="Envoyez-moi un mail !" href="mailto:clement.grimal@gmail.com" target="_blank">clement.grimal@gmail.com</a>) de l&rsquo;aide !</li>
</ul>]]></content:encoded>
			<wfw:commentRss>http://clementgrimal.fr/blog/2013/03/21/projet-sur-les-epaules-de-darwin/feed/</wfw:commentRss>
		<slash:comments>9</slash:comments>
		</item>
		<item>
		<title>Sécuriser son accès SSH</title>
		<link>http://clementgrimal.fr/blog/2013/02/12/ssh-securite/</link>
		<comments>http://clementgrimal.fr/blog/2013/02/12/ssh-securite/#comments</comments>
		<pubDate>Tue, 12 Feb 2013 18:14:30 +0000</pubDate>
		<dc:creator><![CDATA[Clément]]></dc:creator>
				<category><![CDATA[Non classé]]></category>
		<category><![CDATA[administration]]></category>
		<category><![CDATA[raspberry-pi]]></category>
		<category><![CDATA[sécurité]]></category>
		<category><![CDATA[unix]]></category>

		<guid isPermaLink="false">http://clementgrimal.fr/blog/?p=355</guid>
		<description><![CDATA[Afin de pouvoir contrôler son Raspberry Pi sans avoir besoin d&#8217;y connecter un écran, une souris et un écran, il est très commode de s&#8217;y connecter via un accès SSH. Un serveur SSH étant installé par défaut sur Raspbian, il n&#8217;y a alors aucune configuration particulière à faire, et on peut brancher son Raspberry Pi, [&#8230;]]]></description>
				<content:encoded><![CDATA[<p style="clear: both;" >Afin de pouvoir contrôler son Raspberry Pi sans avoir besoin d&rsquo;y connecter un écran, une souris et un écran, il est très commode de s&rsquo;y connecter via un accès SSH. Un serveur SSH étant installé par défaut sur Raspbian, il n&rsquo;y a alors aucune configuration particulière à faire, et on peut brancher son Raspberry Pi, le connecter à son réseau avec un câble Ethernet, et depuis son ordinateur personnel (connecté au même réseau), faire :</p>
<pre class="brush:bash">ssh pi@raspberry
</pre>
<p>Ensuite, si l&rsquo;on ajoute une règle NAT sur sa box pour rediriger le port 22 (celui du serveur SSH), on peut se connecter, en utilisant l&rsquo;adresse IP externe à la place de raspberry, à son Raspberry Pi de n&rsquo;importe où ! Et ce n&rsquo;importe quand ! C&rsquo;est super n&rsquo;est-ce pas ? Sauf qu&rsquo;il serait bon que n&rsquo;importe qui ne puisse pas le faire&#8230; On va donc voir quelles règles simples appliquées pour réduire les chances qu&rsquo;un petit malin se connecte sur votre réseau.</p>
<h2>Pourquoi se protéger ?</h2>
<p>Pour commencer, il faut dire qu&rsquo;il y a pénurie d&rsquo;adresse IP dans le monde, car leur nombre n&rsquo;est pas infinie et il y a de plus en plus d&rsquo;appareils reliés à internet ! C&rsquo;est pourquoi il existe une nouvelle norme IPv6, mais elle n&rsquo;est pas encore majoritairement utilisée. De plus, sur toute machine Linux, il y a pas défaut un compte <code>root</code>, qui est le super administrateur de la machine ! En bref, il peut tout faire, et c&rsquo;est par lui que vous passer dès lors que vous modifier votre système (voir la commande <code>sudo</code> par exemple, qui veut dire &laquo;&nbsp;super user do&nbsp;&raquo;). Donc en faisant :</p>
<pre class="brush:bash">ssh root@adresse_aleatoire
</pre>
<p>J&rsquo;ai plutôt de bonne chance d&rsquo;essayer de me connecter à un ordinateur existant, ayant un serveur SSH utilisant le port 22, et ayant un utilisateur s&rsquo;appelant <code>root</code> ! Ensuite, rien de m&rsquo;empêche d&rsquo;essayer automatiquement des milliers de mots de passe, et avec un peu de chance, je le trouverais ! Il suffit d&rsquo;un programme qui teste méthodiquement toutes les chaînes de caractères, à raison d&rsquo;un essai par seconde, on peut tester 86400 mots de passe par jour ! Même si le nombre de combinaisons possibles est largement plus grand que ça, avec le temps nécessaire, un pirate pourra alors se connecter en root à votre Raspberry Pi !</p>
<blockquote>
<p>Mais il va faire quoi ? Ecouter ma musique ?!</p>
</blockquote>
<p>Il y a peu de chance&#8230; Son intérêt sera plutôt d&rsquo;installer un programme sur votre système, qu&rsquo;il pourra utiliser à sa guise plus tard s&rsquo;il désire lancer une attaque vers un site en particulier. Votre ordinateur est alors devenu ce que l&rsquo;on appelle un zombie, faisant partie d&rsquo;un <a href="https://fr.wikipedia.org/wiki/Botnet#Usages_principaux_des_botnets_malveillants" target="_blank">BotNet</a> !</p>
<h2>Quelques règles simples</h2>
<p>Pour éviter ce scénario, on peut appliquer les quelques règles suivantes.</p>
<h3>Changer le port</h3>
<p>Rien de plus simple, éditer la configuration de votre serveur <code>ssh</code>, qui est décrite dans le fichier <code>/etc/ssh/sshd_config</code>, pour y faire figurer la ligne :</p>
<pre class="brush:plain">Port 1337
</pre>
<p><strong>Attention : </strong>vous risquez d&rsquo;être déconnecté si vous faite l&rsquo;opération en étant justement connecté en SSH&#8230; Donc vous pouvez dans un premier temps utiliser 2 ports, le 22 et le 1337 en dupliquant cette ligne. Puis supprimer la ligne Port 22 ultérieurement. Vous pouvez remplacer 1337 par n&rsquo;importe quel numéro compris entre 1024 et 65537, en vérifiant qu&rsquo;il n&rsquo;est pas déjà utilisé par un autre programme.</p>
<p>Il faut alors penser à changer la règle NAT dans votre box, pour rediriger le port 1337 (et plus le 22). Pour vous connecter maintenant, utilisez l&rsquo;option <code>-p</code> de la commande <code>ssh</code> :</p>
<pre class="brush:bash">ssh -p 1337 pi@raspberry
</pre>
<h3>Désactiver la connexion root</h3>
<p>Pour éviter à quiconque (vous y compris) de vous connecter directement en super utilisateur à votre Raspberry Pi . Il faut également éditer le fichier <code>/etc/ssh/sshd_config</code>, pour modifier la ligne:</p>
<pre class="brush:plain">PermitRootLogin no
</pre>
<h3>Installation d&rsquo;un logiciel qui bannit en cas d&rsquo;échec</h3>
<p>Pour éviter les attaques de type &laquo;&nbsp;brute force&nbsp;&raquo; qui consiste à essayer le plus possible de mots de passe, il est possible d&rsquo;installer un logiciel qui va se charger de bannir une adresse IP si un utilisateur échoue à se connecter plus d&rsquo;un certain nombre de fois. J&rsquo;utilise personnellement le logiciel <code>fail2ban</code> (il y en a d&rsquo;autres !), disponible dans les dépôts. Il y a pas grand chose à faire pour le configurer, on modifie le fichier <code>/etc/fail2ban/jail.conf</code>, les paramètres intéressants sont les suivants :</p>
<pre class="brush:plain">ignoreip = 127.0.0.1/8
bantime  = 600
maxretry = 3

destemail = votre_adresse@mail.com

action = %(action_mwl)s
</pre>
<p><code>ignoreip</code> permet de ne pas se faire bannir depuis le Raspberry Pi lui même, <code>bantime</code> est le temps de bannissement en secondes (10 minutes par défaut donc), <code>maxretry</code> le nombre d&rsquo;échecs pour être bannit. Ensuite, <code>destmail</code> est l&rsquo;adresse email à laquelle seront envoyés les alertes, et surtout action sera l&rsquo;action en cas de bannissement. J&rsquo;aime bien <code>action_mwl</code> qui est celle qui envoie le plus d&rsquo;informations. Cette action (les autres aussi) peut  elle-même être personnalisée en éditant le fichier  <code>/etc/fail2ban/action.d/sendmail-whois-lines.conf</code></p>
<p><strong>Remarque :</strong> pour que l&rsquo;envoi des mail se passe correctement, il vous faudra avoir correctement installé et configuré un MTA sur votre système, et j&rsquo;ai déjà expliqué comment faire dans ce billet : <a href="http://clementgrimal.fr/blog/2013/01/24/raspberry-pi-serveur-web-sfr-box/#Envoi_de_mail">Installation d&rsquo;un serveur web (Envoi de mail)</a></p>
<h3>Ne pas utiliser de mot de passe</h3>
<p>Finalement, il est possible de ne pas utiliser de mot de passe pour se connecter, mais de passer par la génération de clé de cryptage. Cette méthode est très bien pour des installations critiques, mais je trouve que l&rsquo;on perd alors en flexibilité, et je ne l&rsquo;utilise personnellement pas&#8230; Je ne détaillerai donc pas ici comme procéder, mais il existe de nombreux tutoriels en ligne, par exemple : <a href="http://www.lea-linux.org/documentations/Trucs:Connection_SSH_sans_mot_de_passe">lea-linux.org : Connection_SSH_sans_mot_de_passe</a></p>
<h3>Sources</h3>
<ul>
<li>Pénurie d&rsquo;adresses IP v4 annoncée : <a href="http://www.tomsguide.fr/actualite/Adresse-IP-Europe,18390.html">http://www.tomsguide.fr/actualite/Adresse-IP-Europe,18390.html</a></li>
<li>Discussion sur comment sécuriser l&rsquo;accès SSH à son Raspberry : <a href="http://www.raspberrypi.org/phpBB3/viewtopic.php?f=36&amp;t=7122">http://www.raspberrypi.org/phpBB3/viewtopic.php?f=36&amp;t=7122</a></li>
<li>Changer le port SSH : <a href="http://www.raspberrypi.org/phpBB3/viewtopic.php?f=36&amp;t=7122">http://www.itworld.com/nls_unixssh0500506</a></li>
<li>Wiki sur l&rsquo;installation et la configuration de Fail2ban : <a href="https://www.isalo.org/wiki.debian-fr/index.php?title=Fail2ban">https://www.isalo.org/wiki.debian-fr/index.php?title=Fail2ban</a></li>
</ul>]]></content:encoded>
			<wfw:commentRss>http://clementgrimal.fr/blog/2013/02/12/ssh-securite/feed/</wfw:commentRss>
		<slash:comments>12</slash:comments>
		</item>
		<item>
		<title>Raspberry Pi : gestion de sa carte SD</title>
		<link>http://clementgrimal.fr/blog/2013/02/06/raspberry-pi-carte-sd-sauvegarde-restauration/</link>
		<comments>http://clementgrimal.fr/blog/2013/02/06/raspberry-pi-carte-sd-sauvegarde-restauration/#comments</comments>
		<pubDate>Wed, 06 Feb 2013 21:41:04 +0000</pubDate>
		<dc:creator><![CDATA[Clément]]></dc:creator>
				<category><![CDATA[Non classé]]></category>
		<category><![CDATA[administration]]></category>
		<category><![CDATA[raspberry-pi]]></category>

		<guid isPermaLink="false">http://clementgrimal.fr/blog/?p=399</guid>
		<description><![CDATA[A force de jouer avec mon Raspberry Pi, j&#8217;ai eu le désagrément de le voir refuser de démarrer&#8230; La partition /root de ma carte SD était corrompue. J&#8217;ai donc du me résoudre à réinstaller Raspbian, et à repartir de zéro, l&#8217;occasion cependant d&#8217;apprendre à faire des sauvegardes et des restaurations ! Bien sûr, je travaille [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>A force de jouer avec mon Raspberry Pi, j&rsquo;ai eu le désagrément de le voir refuser de démarrer&#8230; La partition <code>/root</code> de ma carte SD était corrompue. J&rsquo;ai donc du me résoudre à réinstaller Raspbian, et à repartir de zéro, l&rsquo;occasion cependant d&rsquo;apprendre à faire des sauvegardes et des restaurations !</p>
<p>Bien sûr, je travaille sous Linux (Xubuntu puisque vous voulez tout savoir), et si vous êtes sous Windows, je sais qu&rsquo;il est possible de faire la même chose, mais je ne le couvrirai pas dans ce billet.</p>
<p>Ce qu&rsquo;il faut comprendre, c&rsquo;est que comme ma carte SD est de taille relativement faible (8Go), il est facile de faire une sauvegarde complète de son contenu (surtout en compressant le résultat).</p>
<p>La commande qu&rsquo;il faut utiliser est la commande <code>dd</code>, la même que j&rsquo;ai utilisé pour ma première installation de Raspbian. Ses deux arguments principaux sont :</p>
<ul>
<li><code>if</code> :  fichier d&rsquo;entrée (ou périphérique)</li>
<li><code>of</code> : fichier de sortie (ou périphérique)</li>
</ul>
<p>Il faut déjà savoir à quel périphérique correspond votre lecteur de carte SD, utilisez la commande <code>fdisk</code> :</p>
<pre class="brush:bash">sudo fdisk -l
</pre>
<p>Et cherchez un disque d&rsquo;environ 8Go. Si Raspbian est installé sur la carte, vous avez normalement deux partitions, voilà ce que j&rsquo;obtiens par exemple :</p>
<pre class="brush:plain">Disk /dev/sda: 7969 MB, 7969177600 bytes
4 heads, 16 sectors/track, 243200 cylinders, total 15564800 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x00017b69

		Device Boot      Start         End      Blocks   Id  System
/dev/sda1            8192      122879       57344    c  W95 FAT32 (LBA)
/dev/sda2          122880    15564799     7720960   83  Linux
</pre>
<h2>Sauvegarde</h2>
<p>Je sais donc que c&rsquo;est <code>/dev/sda</code> qui correspond à ma carte SD que je souhaite sauvegarder. Pour faire une sauvegarde, il me suffit alors d&rsquo;utiliser :</p>
<pre class="brush:bash">sudo dd if=/dev/sda of=/chemin/vers/ma/sauvegarde.img bs=1M
</pre>
<p>Le fichier <code>/chemin/vers/ma/sauvegarde.img</code> fait alors exactement 8Go. J&rsquo;ai personnellement fait plusieurs sauvegardes pendant que je re-configurais mon Raspberry Pi. Par exemple, après avoir fait une mise à jour complète du système, <a title="Raspberry Pi : installation et partage d’un disque dur externe" href="http://clementgrimal.fr/blog/2013/01/30/raspberry-pi-partage-disque-dur-usb/">installer vos disques externes</a>, sécuriser votre accès SSH (article à venir), <a title="Raspberry Pi : installation d’un serveur web" href="http://clementgrimal.fr/blog/2013/01/24/raspberry-pi-serveur-web-sfr-box/">installer votre serveur web</a> et <a title="Utilisation d’un DNS dynamique" href="http://clementgrimal.fr/blog/2013/01/29/utilisation-dns-dynamique/">configurer votre DNS dynamique</a>, une petite sauvegarde du système ne fait pas de mal !</p>
<h2>Restauration</h2>
<p>Il est possible de restaurer cette image en inversant les argument <code>if</code> et <code>of</code> :</p>
<pre class="brush:bash">sudo dd if=/chemin/vers/ma/sauvegarde.img of=/dev/sda bs=1M
</pre>
<p><strong>Attention : </strong> en utilisant <code>of=/dev/sda</code> vous écrasez complètement le disque sda, donc vérifiez bien avec la commande <code>fdisk</code>.</p>
<h2>Compression</h2>
<p>Si vous faites régulièrement l&rsquo;opération, pensez qu&rsquo;il est possible de compresser les images pour qu&rsquo;elles occupent moins de 8Go sur votre disque en utilisant la commande <code>gzip</code> par exemple :</p>
<pre class="brush:bash">gzip /chemin/vers/ma/sauvegarde.img
</pre>
<p>qui créera un fichier <code>/chemin/vers/ma/sauvegarde.img.gz</code>, bien plus petit que 8Go. Il est également possible de faire la sauvegarde et la compression en une seule opération, et pour cela, je vous recommande la lecture des pages 12 et 13 du dernier numéro du magazine MagPi (dans les sources).</p>
<h2><strong>Effacer la table de partition</strong></h2>
<p>Lorsque j&rsquo;ai eu mon problème de partition <code>/root</code> corrompue, même en re-copiant une image toute fraîche de Raspbian sur ma carte SD, mon Raspberry Pi refuser toujours de démarrer. Il a fallu que j&rsquo;efface complètement la table de partition de la carte avec la commande :</p>
<pre class="brush:bash">sudo dd if=/dev/zero of=/dev/sda bs=1M count=2
</pre>
<p><strong>Attention :</strong> vérifiez bien que <code>/dev/sda</code> est la carte SD, et pas un autre disque dur !</p>
<h2 class="beforelist">Sources</h2>
<ul>
<li>Le blog qui m&rsquo;a sauvé : <a href="http://www.chrisnewland.com/solved-raspberry-pi-panic-vfs-unable-to-mount-root-fs-on-unknown-block1792-278" target="_blank">http://www.chrisnewland.com/solved-raspberry-pi-panic-vfs-unable-to-mount-root-fs-on-unknown-block1792-278</a></li>
<li>Le numéro du magazine MagPi avec un article très complet sur la gestion de sa carte SD en pages 12 et 13 : <a href="http://issuu.com/themagpi/docs/issue_9_final" target="_blank">http://issuu.com/themagpi/docs/issue_9_final</a></li>
</ul>]]></content:encoded>
			<wfw:commentRss>http://clementgrimal.fr/blog/2013/02/06/raspberry-pi-carte-sd-sauvegarde-restauration/feed/</wfw:commentRss>
		<slash:comments>7</slash:comments>
		</item>
		<item>
		<title>Capture vidéo, compression et filigrane sous Unix</title>
		<link>http://clementgrimal.fr/blog/2013/02/05/capture-video-compression-filigrane-unix/</link>
		<comments>http://clementgrimal.fr/blog/2013/02/05/capture-video-compression-filigrane-unix/#comments</comments>
		<pubDate>Tue, 05 Feb 2013 18:51:27 +0000</pubDate>
		<dc:creator><![CDATA[Clément]]></dc:creator>
				<category><![CDATA[Non classé]]></category>
		<category><![CDATA[tutoriel]]></category>
		<category><![CDATA[unix]]></category>
		<category><![CDATA[videos]]></category>

		<guid isPermaLink="false">http://clementgrimal.fr/blog/?p=412</guid>
		<description><![CDATA[&#160;Si vous souhaitez faire une capture vidéo de votre écran sous Unix, la commande avconv (anciennement ffmpeg) devrait probablement vous suffire. J&#8217;ai eu besoin de faire ça, et voilà comment que je me suis débrouillé. Capture Pour faire la capture vidéo de l&#8217;écran : avconv -f x11grab -show_region 1 -framerate 24 -s sxga -i :0.0+350,0 [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>
	&nbsp;Si vous souhaitez faire une capture vidéo de votre écran sous Unix, la commande avconv (anciennement ffmpeg) devrait probablement vous suffire. J&rsquo;ai eu besoin de faire ça, et voilà comment que je me suis débrouillé.
</p>
<h2 style="clear: both">
	Capture<br />
</h2>
<p>
	Pour faire la capture vidéo de l&rsquo;écran :
</p>
<pre class="brush:bash">
avconv -f x11grab -show_region 1 -framerate 24 -s sxga -i :0.0+350,0 -threads 2 -q 1 -bt 8000000 -b 8500000 video.avi
</pre>
<p>
	Les options utilisées sont les suivantes :
</p>
<ul>
<li>
		<code>-f x11grab</code> : pour dire que l&rsquo;on capture l&rsquo;écran (le serveur X)
	</li>
<li><code>-show_region 1</code> : pour afficher un rectangle autour de la zone de l&rsquo;écran capturée
	</li>
<li><code>-framerate 24</code> : on capture 24 images par secondes
	</li>
<li><code>-s sxga</code> : la zone capturée fait 1280&#215;1024
	</li>
<li><code>-i :0.0+350,0</code> : le décalage (300 pixels en horizontal et 0 en vertical)
	</li>
<li><code>-threads 2</code> : le nombre de coeurs de votre processeur utilisés
	</li>
<li><code>-q 1</code> : meilleure qualité (pas de compression, ça on verra après)
	</li>
<li><code>-bt 8000000 -b 8500000</code> : le débit (&laquo;&nbsp;bitrate&nbsp;&raquo;)&nbsp;et sa tolérance, pour permettre une bonne qualité
	</li>
</ul>
<h2>
	Compression<br />
</h2>
<p>
	Ensuite, pour compresser la jolie vidéo, il faut modifier l&rsquo;argument q :
</p>
<pre class="brush:bash">
avconv -i video.avi -q 12 video_smaller.avi
</pre>
<h2>
	Watermark<br />
</h2>
<p>
	Pour ajouter un filigrane (&laquo;&nbsp;watermark&nbsp;&raquo;) sur la vidéo, il suffit d&rsquo;une image. Prenez par exemple le logo de votre entreprise, et rendez le un peu plus discret à l&rsquo;aide du Gimp par exemple, avec les deux transformations suivantes :
</p>
<ul>
<li>Couleurs &gt; Niveaux &gt; Niveaux de sortie : augmenter le seuil du bas
	</li>
<li>Couleurs &gt;&nbsp;Couleur vers alpha&#8230;
	</li>
</ul>
<p>
	Si cette image est image.png et dans le même dossier que vos vidéos, pour l&rsquo;ajouter en sur-impression à la vidéo :
</p>
<pre class="brush:bash">
avconv -i video.avi -vf "movie=image.png [watermark]; [in][watermark] overlay=main_w/2-overlay_w/2:main_h/2-overlay_h/2 [out]" -q 12 video_watermark.avi
</pre>
<p>
	J&rsquo;ai gardé l&rsquo;argument <code>-q 12</code> pour compresser la vidéo en même temps, et j&rsquo;ai ajouté l&rsquo;argument <code>-vf</code>, qui est assez compliqué&#8230; Si j&rsquo;ai bien compris, la partie&nbsp;<code>movie=image.png [watermark];</code> définie un calque à ajouter et le nomme watermark, puis la seconde partie&nbsp;<code>[in][watermark] overlay=main_w/2-overlay_w/2:main_h/2-overlay_h/2 [out]</code> permet d&rsquo;ajouter ce calcque. Le overlay permet de positionner l&rsquo;image, et les nom main_w, main_h, overlay_w et overlay_h correspondent respectivment aux largeurs et hauteurs de la vidéo et de l&rsquo;image. Si vous avez suivi, notre filigrane sera donc centrée ! &nbsp;Mais si vous voulez par exemple la positionner en haut à gauche, il faut utiliser <code>overlay=0:0</code>
</p>
<h2>
	Démo !<br />
</h2>
<p>
	Je fais à la fois la capture, le filigrane et la compression. La commande exacte est la suivante :
</p>
<pre class="brush:bash">
avconv -f x11grab -show_region 1 -framerate 24 -s 1280x900 -i :0.0+0,105 -vf "movie=me.png [watermark]; [in][watermark] overlay=main_w/2-overlay_w/2:main_h/2-overlay_h/2 [out]" -threads 2 -q 12 -bt 8000000 -b 8500000 demo_blog.flv
</pre>
<p>
	
				<script type='text/javascript'>
				if (typeof jQuery == 'undefined') { document.write('<script type="text/javascript" src="http://clementgrimal.fr/blog/wp-content/plugins/hana-flv-player/mediaelement/build/jquery.js"><\/script>'); }	
				</script>
				<style>.mejs-inner img { max-width:100%; max-height:100%; margin:0 ; padding:0 } 
				.mejs-overlay-button, .mejs-overlay-loading  {display:none;}</style>
				<script type='text/javascript' src='http://clementgrimal.fr/blog/wp-content/plugins/hana-flv-player/mediaelement/build/mediaelement-and-player.min.js'></script>
				<link rel='stylesheet' href='http://clementgrimal.fr/blog/wp-content/plugins/hana-flv-player/mediaelement/build/mediaelementplayer.mod.css' />
				<!-- due to the bug - IE8 does not show video --> 
				<!--[if IE 8]><style> .me-plugin { position: static; } </style><![endif]-->
				<div style='padding:0;margin:0; border:0;'><video  id='hana_flv_media_1'  src='http://clementgrimal.fr/blog/wp-content/uploads/2013/02/demo_blog.flv' width='600' height='338'  
	preload='true'     controls='controls' >	<object width="600" height="338" type="application/x-shockwave-flash" data="http://clementgrimal.fr/blog/wp-content/plugins/hana-flv-player/mediaelement/build/flashmediaelement.swf"> 		
		<param name="movie" value="http://clementgrimal.fr/blog/wp-content/plugins/hana-flv-player/mediaelement/build/flashmediaelement.swf" /> 
		<param name="flashvars" value="controls=true&amp;file=http://clementgrimal.fr/blog/wp-content/uploads/2013/02/demo_blog.flv&amp;poster=" />		
		
	</object></video></div><script type='text/javascript'>
				 
				jQuery('#hana_flv_media_1').mediaelementplayer({ pauseOtherPlayers: false , pluginType:'youtube'   });
				</script>
</p>
<p>
	Ok, ça fait un peu narcissique de se mettre en filigrane mais c'est la première image que j'avais sous la main !
</p>
<h2>
	Sources<br />
</h2>
<ul>
<li>La page du manuel de la commande avconv :&nbsp;<a href="http://libav.org/avconv.html" target="_blank">http://libav.org/avconv.html</a>
	</li>
<li>Un billet que j'ai utilisé pour les paramètres concernant la qualité :&nbsp;<a href="http://my.opera.com/patkoscsaba/blog/2012/08/17/desktop-recording-with-avconv-formerly-know-as-ffmpeg">http://my.opera.com/patkoscsaba/blog/2012/08/17/desktop-recording-with-avconv-formerly-know-as-ffmpeg</a>
	</li>
<li>Centrage de l'image :&nbsp;<a href="http://stackoverflow.com/questions/10918907/how-to-add-transparent-watermark-in-center-of-a-video-with-ffmpeg" target="_blank">http://stackoverflow.com/questions/10918907/how-to-add-transparent-watermark-in-center-of-a-video-with-ffmpeg</a>
	</li>
</ul>
]]></content:encoded>
			<wfw:commentRss>http://clementgrimal.fr/blog/2013/02/05/capture-video-compression-filigrane-unix/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
<enclosure url="http://clementgrimal.fr/blog/wp-content/uploads/2013/02/demo_blog.flv" length="2183144" type="video/x-flv" />
		</item>
		<item>
		<title>Raspberry Pi : installation et partage d&#8217;un disque dur externe</title>
		<link>http://clementgrimal.fr/blog/2013/01/30/raspberry-pi-partage-disque-dur-usb/</link>
		<comments>http://clementgrimal.fr/blog/2013/01/30/raspberry-pi-partage-disque-dur-usb/#comments</comments>
		<pubDate>Wed, 30 Jan 2013 17:50:04 +0000</pubDate>
		<dc:creator><![CDATA[Clément]]></dc:creator>
				<category><![CDATA[Non classé]]></category>
		<category><![CDATA[administration]]></category>
		<category><![CDATA[partage]]></category>
		<category><![CDATA[raspberry-pi]]></category>
		<category><![CDATA[tutoriel]]></category>
		<category><![CDATA[unix]]></category>

		<guid isPermaLink="false">http://clementgrimal.fr/blog/?p=286</guid>
		<description><![CDATA[Comme je souhaite utiliser mon Raspberry comme &#171;&#160;serveur de stockage&#160;&#187; entre autres, j&#8217;ai acheté un disque dur USB alimenté, car les 8Go de la carte SD étaient un peu juste. Dans ce billet, j&#8217;explique comment j&#8217;ai configuré ledit disque dur, pour un partage simple. Le montage Dans le monde Unix, le verbe &#171;&#160;monter&#160;&#187; désigne l&#8217;opération [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Comme je souhaite utiliser mon Raspberry comme &laquo;&nbsp;serveur de stockage&nbsp;&raquo; entre autres, j&rsquo;ai acheté un disque dur USB alimenté, car les 8Go de la carte SD étaient un peu juste. Dans ce billet, j&rsquo;explique comment j&rsquo;ai configuré ledit disque dur, pour un partage simple.</p>
<h3>Le montage</h3>
<p>Dans le monde Unix, le verbe &laquo;&nbsp;monter&nbsp;&raquo; désigne l&rsquo;opération barbare qui consiste à faire en sorte de pouvoir accéder à votre disque dur (ou autre périphérique). En effet, quand on le branche simplement, on ne peut pas y accéder tant qu&rsquo;il n&rsquo;a pas été monté. Donc on va faire en sorte que ce disque dur là tout neuf soit automatiquement monté dans un répertoire de notre choix, avec les permissions qui vont bien, afin d&rsquo;être sûr de toujours le retrouver.</p>
<p>Pour savoir à quel &laquo;&nbsp;device&nbsp;&raquo; il correspond, utilisez la commande :</p>
<pre class="brush:bash">sudo fdisk -l
</pre>
<p>Dans le résultat obtenu, il faut chercher le bloc qui correspond au disque dur, pour moi c&rsquo;est :</p>
<pre class="brush:plain">Disk /dev/sdb: 2000.4 GB, 2000398933504 bytes
255 heads, 63 sectors/track, 243201 cylinders, total 3907029167 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x524a5d81

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1            2048  3907024895  1953511424    7  HPFS/NTFS/exFAT
</pre>
<p>Puisque je sais qu&rsquo;il fait 2To (enfin 2000398933504 octets). Il correspond donc à <code>/dev/sdb1</code> (une seule partition) et il est formaté en NTFS, tout va bien. Maintenant, il va nous falloir une seconde info le concernant : son UUID. C&rsquo;est un identifiant unique, pour le trouver, utilisez la commande :</p>
<pre class="brush:bash">ls -l /dev/disk/by-uuid/
</pre>
<p>Et cherchez l&rsquo;UUID recherché est la suite de numéro et de lettres qui précède le <code>-&gt; ../../sdb1</code> dans mon cas. Dernière étape : choisir et créer le répertoire dans lequel on veut monter ce disque. J&rsquo;ai choisit de créer un dossier <code>/storage/</code> dans lequel je monterai mes disques durs, et donc pour celui là en l&rsquo;occurrence, on va créer le répertoire <code>/storage/mon_disque</code> :</p>
<pre class="brush:bash">sudo mkdir /storage
sudo mkdir /storage/mon_disque
</pre>
<p>On peut maintenant configurer le fichier <code>/etc/fstab</code> pour y ajouter la ligne qui correspondra au montage de notre disque dur :</p>
<pre class="brush:bash">sudo vim /etc/fstab
</pre>
<p>Et ajoutez la ligne suivante à la fin :</p>
<pre class="brush:plain">UUID=votre_UUID    /storage/mon_disque    ntfs-3g    defaults    0    2
</pre>
<p>Voilà, vous pouvez maintenant monter manuellement votre disque en faisant la commande [<b>AJOUT : </b>il faut avoir installer le paquet <code>ntfs-3g</code> avant !] :</p>
<pre class="brush:bash">sudo mount /dev/sdb1
</pre>
<p>Mais tout l&rsquo;intérêt est que maintenant, à chaque fois que vous brancherez <strong>ce disque</strong> sur <strong>ce raspberry</strong>, il sera toujours monté de la même façon, dans le dossier <code>/storage/mon_disque/</code> !</p>
<p>Un point qui ne me plaisait pas spécialement avec cette configuration très simple, est que le disque dur est en accès 777, c&rsquo;est à dire que tout le monde peut écrire dessus ! Je ne sais pas si cela est fondamentalement grave mais j&rsquo;ai préféré changer les permissions. Le seul point délicat, c&rsquo;est que certains logiciels ont besoin de pouvoir accéder à ce disque : samba, client bittorrent, serveur web, etc&#8230; On va voir dans la suite comment j&rsquo;ai choisi de gérer cela.</p>
<h3>Les permissions</h3>
<p>Ce qui m&rsquo;a semblé le plus simple, c&rsquo;est de créer un groupe storage qui aura tous les droits sur mes disques durs externes, et j&rsquo;y ajouterai à la main les utilisateurs. Voilà la démarche que j&rsquo;ai suivie :</p>
<ol>
<li>Création du groupe :
<pre class="brush:bash">sudo groupadd storage
</pre>
</li>
<li>Récupération de l&rsquo;id de ce groupe. La commande :
<pre class="brush:bash">cat /etc/group |grep storage
</pre>
<p>devrait vous renvoyer une seule ligne ressemblant à <code>:storage:x:1005:</code> L&rsquo;id du groupe est donc 1005, et on va en avoir besoin plus tard.</p>
</li>
<li>Ajout de l&rsquo;utilisateur pi (ou toto si vous vous appelez toto) :
<pre class="brush:bash">sudo usermod -a -G storage pi
</pre>
</li>
<li>Modification du fichier <code>/etc/fstab</code> pour que le dossier de montage appartienne au groupe storage (on remplace les options defaults) :
<pre class="brush:plain">UUID=votre_UUID    /storage/mon_disque    ntfs-3g    suid,dev,auto,async,gid=1005,umask=007    0    2
</pre>
<p>Le 1005 correspond à l&rsquo;id du groupe storage et le umask est un paramètre assez compliqué (voir mes sources à la fin du billet), mais la valeur 007 implique que les utilisateurs n&rsquo;appartenant pas au groupe storage pourront lire et parcourir le disque, mais pas écrire dessus.</p>
</li>
<li>Eventuellement, ajout des autres utilisateurs correspondant aux logiciels qui doivent pouvoir écrire sur le disque. Par exemple, si vous souhaitez partager certains dossiers via votre serveur web (voir mon billet <a title="Raspberry Pi : installation d’un serveur web" href="http://clementgrimal.fr/blog/2013/01/24/raspberry-pi-serveur-web-sfr-box/">Installation d&rsquo;un serveur web</a>), l&rsquo;utilisateur correspondant au serveur Apache2 est www-data. Il faut donc faire :
<pre class="brush:bash">sudo usermod -a -G storage www-data
</pre>
</li>
</ol>
<h3>Partage sur le serveur Web</h3>
<p>J&rsquo;ai expliqué dans le billet <a title="Raspberry Pi : installation d’un serveur web" href="http://clementgrimal.fr/blog/2013/01/24/raspberry-pi-serveur-web-sfr-box/">Installation d&rsquo;un serveur web</a> comment installer un simple serveur Apache. Vous pouvez par exemple partager un dossier de votre disque dur directement via le web en créant un lien symbolique. Par exemple, si vous souhaitez partager tout le contenu du dossier <code>/storage/mon_disque/dossier_public/</code>, vous pouvez utiliser la commande :</p>
<pre class="brush:bash">sudo ln -s /storage/mon_disque/dossier_public/ /var/www/dossier_public
</pre>
<p>Si l&rsquo;adresse pour accéder à voter serveur web est <a onclick="return false;" href="javascript:void(0)" target="_blank">mon-rpi.dnsdynamic.com</a> (vous avez utiliser mon tutoriel <a title="Utilisation d’un DNS dynamique" href="http://clementgrimal.fr/blog/2013/01/29/utilisation-dns-dynamique/">Utilisation d’un DNS dynamique</a> ?), vous (ou n&rsquo;importe qui attention !) pouvez consulter le contenu de ce dossier à l&rsquo;adresse : <a onclick="return false;" href="javascript:void(0)" target="_blank">mon-rpi.dnsdynamic.com/dossier_public/</a></p>
<p>Il est possible de protéger ce que vous partager sur votre serveur web, par mot de passe par exemple, mais j&rsquo;en parlerai plus tard. J&rsquo;ajoute tout de même un lien la dessus dans les sources de ce billet.</p>
<h3>Partage avec Samba</h3>
<p>Je pense que j&rsquo;écrirai un billet là-dessus, mais juste au cas où vous auriez déjà configuré un serveur Samba (partage de certains répertoires, y compris avec Windows), sachez que si vous avez suivi ce tutoriel, il vous faudra modifier légèrement votre configuration. Dans le fichier <code>/etc/samba/smb.conf</code>, pour chacun de vos partage, ajoutez la ligne force group = storage, ce qui donnera par exemple :</p>
<pre class="brush:plain">[mon_disque]
	path = /storage/mon_disque
	browseable = yes
	read only = no
	guest ok = yes
	force group = storage
</pre>
<h3>Accès par client Bittorrent</h3>
<p>On verra dans un prochain billet comment installer un client Bittorrent (Transmission) sur votre Raspberry Pi, et le configure pour que les fichiers téléchargés arrivent sur votre disque externe. Il ne faudra donc pas oublier d&rsquo;ajouter l&rsquo;utilisateur debian-transmission au groupe storage :</p>
<pre class="brush:bash">sudo usermod -a -G storage debian-transmission
</pre>
<h3>Sources</h3>
<ul>
<li>Manuel de fstab sur le site Ubuntu-fr : <a href="http://doc.ubuntu-fr.org/mount_fstab" target="_blank">http://doc.ubuntu-fr.org/mount_fstab</a></li>
<li>Aide sur l&rsquo;utilisation de umask (en anglais) : <a href="http://www.cyberciti.biz/tips/understanding-linux-unix-umask-value-usage.html" target="_blank">http://www.cyberciti.biz/tips/understanding-linux-unix-umask-value-usage.html</a></li>
<li>Protection par mot de passe de dossiers pour Apache : <a href="http://www.cyberciti.biz/faq/howto-setup-apache-password-protect-directory-with-htaccess-file/" target="_blank">http://www.cyberciti.biz/faq/howto-setup-apache-password-protect-directory-with-htaccess-file/</a></li>
</ul>]]></content:encoded>
			<wfw:commentRss>http://clementgrimal.fr/blog/2013/01/30/raspberry-pi-partage-disque-dur-usb/feed/</wfw:commentRss>
		<slash:comments>5</slash:comments>
		</item>
		<item>
		<title>Utilisation d&#8217;un DNS dynamique</title>
		<link>http://clementgrimal.fr/blog/2013/01/29/utilisation-dns-dynamique/</link>
		<comments>http://clementgrimal.fr/blog/2013/01/29/utilisation-dns-dynamique/#comments</comments>
		<pubDate>Tue, 29 Jan 2013 18:12:06 +0000</pubDate>
		<dc:creator><![CDATA[Clément]]></dc:creator>
				<category><![CDATA[Non classé]]></category>
		<category><![CDATA[administration]]></category>
		<category><![CDATA[dns]]></category>
		<category><![CDATA[raspberry-pi]]></category>
		<category><![CDATA[unix]]></category>

		<guid isPermaLink="false">http://clementgrimal.fr/blog/?p=303</guid>
		<description><![CDATA[Comme vous le savez, je possède depuis peu un Raspberry Pi, et j&#8217;y ai installé un serveur web. J&#8217;ai écrit un billet là dessus, et à ce moment là, pour accéder à ce site web, je m&#8217;étais passé d&#8217;utiliser un service de DNS dynamique, et il fallait donc que j&#8217;utilise directement l&#8217;adresse IP de ma [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Comme vous le savez, je possède depuis peu un Raspberry Pi, et j&rsquo;y ai installé un serveur web. J&rsquo;ai écrit <a title="Raspberry Pi : installation d’un serveur web" href="http://clementgrimal.fr/blog/2013/01/24/raspberry-pi-serveur-web-sfr-box/">un billet là dessus</a>, et à ce moment là, pour accéder à ce site web, je m&rsquo;étais passé d&rsquo;utiliser un service de DNS dynamique, et il fallait donc que j&rsquo;utilise directement l&rsquo;adresse IP de ma box SFR. Non seulement ce n&rsquo;est pas pratique, mais en plus, si l&rsquo;adresse IP change (on redémarre la box par exemple), c&rsquo;est embêtant. J&rsquo;avais donc fait un script pour détecter un changement d&rsquo;adresse IP, chargé de m&rsquo;envoyé un e-mail.</p>
<p>Bref, ce n&rsquo;était pas très sérieux ! Heureusement, un collègue (<a title="Profil Twitter de Toumt4m" href="https://twitter.com/Toumt4m" target="_blank">@Toumt4m</a>) m&rsquo;a éclairé sur l&rsquo;utilisation pratique du DNS dynamique !</p>
<h3>C&rsquo;est quoi le DNS ?</h3>
<p>N&rsquo;étant pas un spécialiste, je me garderai bien de vouloir vous expliquer en détail les mécanismes du DNS. Mais en quelques mots, c&rsquo;est l&rsquo;annuaire d&rsquo;internet. En effet, chaque site web est hébergé sur un ordinateur. Un ordinateur qui doit donc être relié à internet, il a ainsi une adresse IP. Pour accéder au site web qu&rsquo;il héberge, il suffit alors de taper l&rsquo;adresse IP dans son navigateur. Vous voulez visiter google.fr, rien de plus simple : <a href="http://74.125.230.215" target="_blank">74.125.230.215</a></p>
<p>Seulement voilà, ce n&rsquo;est pas très simple de retenir toutes ces adresses IP, donc le DNS nous permet de retenir le nom de domaine du site, et il se chargera pour nous de le traduire vers l&rsquo;adresse IP correspondante. Si vous voulez en savoir plus, un bon point de départ est la page Wikipédia : <a href="https://fr.wikipedia.org/wiki/Domain_Name_System" target="_blank">wikipedia.org/wiki/Domain_Name_System</a></p>
<p>Finalement, lorsque l&rsquo;adresse IP du serveur qui héberge notre site web peut changer, il faut utiliser un service de DNS dynamique qui permet de mettre à jour en temps réel le DNS. Nous allons donc voir comment utiliser un tel service.</p>
<h3>Inscription au service</h3>
<p>Il existe pléthore de sites proposant ce type de service, j&rsquo;ai personnellement opté pour <a href="http://www.dnsdynamic.org/" target="_blank">dnsdynamic.org</a> (si vous en connaissez des mieux, ça m&rsquo;intéresse !). C&rsquo;est très simple, il suffit de s&rsquo;inscrire, puis d&rsquo;ajouter un sous-domaine comme mon-rpi.dnsdynamic.com et de lui associer son adresse IP. Pour connaître votre adresse IP externe, vous pouvez par exemple allez sur le site <a href="http://www.ipogre.com" target="_blank">ipogre.com</a> (si curl est installé sur votre Raspberry, tapé <code>curl ipogre.com</code> dans un terminal).</p>
<p>Voilà ! Maintenant, en tapant mon-rpi.dnsdynamic.com dans votre navigateur, vous devriez tomber sur le site web que vous hébergez sur votre Raspberry. Mais celà fonctionne également pour vous connecter en ssh par exemple (à condition d&rsquo;avoir redirigé correctement le port de votre serveur ssh&#8230;).</p>
<h3>Mise à jour automatique</h3>
<p>Si votre adresse IP change, il y a plus simple que de se connecter sur <a href="http://www.dnsdynamic.org/" target="_blank">dnsdynamic.org</a> pour mettre à jour votre sous-domaine. Vous pouvez utiliser l&rsquo;API de ce site. En pratique, il vous suffit d&rsquo;installer <code>ddclient</code> :</p>
<pre class="brush:bash">		sudo apt-get install ddclient
	
</pre>
<p>Vous pouvez ensuite reprendre le fichier de configuration <code>/etc/ddclient.conf</code> proposé, en modifiant identifiant, mot de passe et nom du sous-domaine choisi :</p>
<pre class="brush:plain">	   # Configuration file for ddclient generated by debconf
		#
		# /etc/ddclient.conf

		daemon=60                           # check every 60 seconds
		syslog=yes                          # log update msgs to syslog
		mail=root                           # mail all msgs to root
		mail-failure=root                   # mail failed update msgs to root
		pid=/var/run/ddclient.pid           # record PID in file.
		ssl=yes                             # use ssl-support.  Works with
												# ssl-library
		use=web, web=myip.dnsdynamic.com    # get ip from server.
		server=www.dnsdynamic.org           # default server
		login=votre_adresse@mail.com        # default login
		password=votre_mot_de_passe         # default password
		server=www.dnsdynamic.org,          \
		protocol=dyndns2                    \
		mon-rpi.dnsdynamic.com
	
</pre>
<p>Ce logiciel s&rsquo;exécute ensuite comme un démon, mais vous pouvez également le lancer en ligne de commande en faisant :</p>
<pre class="brush:bash">		ddclient -daemon=0 -verbose
	
</pre>
<p>J&rsquo;ai personnelement ajouté cette ligne à mon script (voir le billet &#8230;), c&rsquo;est pas très propre mais comme ça je recevrai toujours l&rsquo;e-mail en plus.</p>
<div>
<p class="beforelist"><strong>Sources :</strong></p>
<ul>
<li>Dynamic DNS :
<ul>
<li><a title="Les DNS Dynamiques sur la documention Ubuntu-fr" href="http://doc.ubuntu-fr.org/dns_dynamique" target="_blank">Les DNS Dynamiques sur la documention Ubuntu-fr</a></li>
<li><a title="La page Wikipédia (en anglais) sur le DNS dynamique" href="https://en.wikipedia.org/wiki/Dynamic_DNS" target="_blank">La page Wikipédia (en anglais) sur le DNS dynamique</a></li>
</ul>
</li>
<li><a title="Le site dnsdynamic.org que j'ai utilisé" href="https://www.dnsdynamic.org" target="_blank">Le site dnsdynamic.org que j&rsquo;ai utilisé</a></li>
<li><a title="Page du logiciel ddclient pour la mise à jour automatique" href="http://sourceforge.net/p/ddclient/wiki/Home/" target="_blank">Page du logiciel ddclient pour la mise à jour automatique</a></li>
</ul>
</div>
]]></content:encoded>
			<wfw:commentRss>http://clementgrimal.fr/blog/2013/01/29/utilisation-dns-dynamique/feed/</wfw:commentRss>
		<slash:comments>10</slash:comments>
		</item>
		<item>
		<title>Raspberry Pi : installation d&#8217;un serveur web</title>
		<link>http://clementgrimal.fr/blog/2013/01/24/raspberry-pi-serveur-web-sfr-box/</link>
		<comments>http://clementgrimal.fr/blog/2013/01/24/raspberry-pi-serveur-web-sfr-box/#comments</comments>
		<pubDate>Thu, 24 Jan 2013 18:01:01 +0000</pubDate>
		<dc:creator><![CDATA[Clément]]></dc:creator>
				<category><![CDATA[Non classé]]></category>
		<category><![CDATA[administration]]></category>
		<category><![CDATA[raspberry-pi]]></category>
		<category><![CDATA[tutoriel]]></category>
		<category><![CDATA[unix]]></category>
		<category><![CDATA[web]]></category>

		<guid isPermaLink="false">http://clementgrimal.fr/blog/?p=222</guid>
		<description><![CDATA[Dans ce billet, je vais décrire comment j&#8217;ai installé un serveur web sur mon Raspberry Pi, mais surtout comment j&#8217;ai configuré mon installation sachant que mon fournisseur d&#8217;accès est SFR. Dans la première moitié, je décris l&#8217;installation du serveur et la configuration minimale pour tester. Et dans la seconde partie, je décris comment s&#8217;en sortir [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Dans ce billet, je vais décrire comment j&rsquo;ai installé un serveur web sur mon Raspberry Pi, mais surtout comment j&rsquo;ai configuré mon installation sachant que mon fournisseur d&rsquo;accès est SFR.</p>
<p>Dans la première moitié, je décris l&rsquo;installation du serveur et la configuration minimale pour tester. Et dans la seconde partie, je décris comment s&rsquo;en sortir sans adresse IP fixe (comme c&rsquo;est le cas chez SFR).</p>
<p><strong>MODIFICATION : </strong>j&rsquo;ai finalement réussi à utilisé un service de DNS dynamique, qui me permet de ne pas forcément utiliser mon script compliqué : <a title="Utilisation d’un DNS dynamique" href="http://clementgrimal.fr/blog/2013/01/29/utilisation-dns-dynamique/">voir ce billet</a> ! </p>
<h3 style="clear: both;">Installation du serveur et configuration minimale</h3>
<h4>Installation du serveur</h4>
<p>On va installer un serveur web, communément appelé <a href="https://fr.wikipedia.org/wiki/LAMP" target="_blak">LAMP</a>, pour Linux / Apache / MySQL / PHP. Avec ça vous aurez de quoi faire tourner un petit site web, avec base de données et pages dynamiques. Il suffit d&rsquo;installer les paquets suivants :</p>
<pre class="brush:bash">	sudo apt-get install apache2 php5 mysql-server libapache2-mod-php5 php5-mysql
</pre>
<p>La racine de votre site se situe alors dans le dossier <code>/var/www/</code> et si vous allez sur la page <a href="http://localhost:80" target="_blank">localhost:80</a>, vous devriez voir la page par défaut d&rsquo;Apache qui dit &laquo;&nbsp;It Works!&nbsp;&raquo;.</p>
<h4>Trouver son adresse IP externe</h4>
<p>Il y a plusieurs façon de faire : vous pouvez vous rendre sur l&rsquo;interface de votre box <a href="http://192.168.1.1" target="_blank">192.168.1.1</a> et l&rsquo;adresse IP est alors visible en haut à droite. Vous pouvez également utiliser un site web tel que <a href="http://www.ipogre.com" target="_blank">ipogre.com</a> (nous l&rsquo;utiliserons d&rsquo;ailleurs dans la seconde partie).</p>
<p>Mais si vous donner cette adresse IP à quelqu&rsquo;un pour qu&rsquo;il puisse voir le site web hebergé sur votre Raspberry, cela ne marchera pas car il &laquo;&nbsp;atterrira&nbsp;&raquo; sur la box ! On va donc voir comment la paramétrer dans la suite.</p>
<h4>Paramètrer sa box</h4>
<p>Par défaut, lorsqu&rsquo;un nouvel équipement se connecte à la box (wifi ou ethernet), elle lui attribue une adresse IP locale aléatoire du type <code>192.168.1.XX</code>. Pour que le Raspberry soit toujours à la même adresse (ce sera mieux pour le retrouver), on va demander à la box de lui attribuer une IP locale fixe. Il faut aller sur l&rsquo;interface de la box (<a href="http://localhost:80" target="_blank">localhost:80</a>), dans l&rsquo;onglet DHCP de la section Réseau. Regarder l&rsquo;aide de SFR à ce sujet qui est très bien faire : <a href="http://assistance.sfr.fr/internet_box-nb4/connexion/hebergement-site-web-box/fc-462-73201" target="_blank">Héberger son site web à la maison avec sa box</a>.</p>
<p>Maintenant, il faut rediriger le port 80 (celui du serveur web) vers votre Raspberry. C&rsquo;est aussi expliqué sur la page d&rsquo;aide de SFR, et il suffit d&rsquo;ajouter une règle NAT. D&rsquo;ailleurs, vous pouvez en profiter pour ajouter d&rsquo;autres règles. En redirigeant également le port 22, vous pourrez vous connecter en ssh à votre Raspberry depuis n&rsquo;importe où !</p>
<h4>Test</h4>
<p>Vous pouvez maintenant donner votre adresse IP externe à votre fameux ami qui meurt d&rsquo;envie de voir le site web que vous hébergez sur votre Raspberry. Disons que cette adresse est <code>A.B.C.D</code>, s&rsquo;il se rend à l&rsquo;adresse <a href="#">A.B.C.D</a> sur son navigateur, il atterrira sur votre site ! Si vous testez de chez vous, vous arriverez sur l&rsquo;interface de la box, ce qui est moins intéressant, utilisez l&rsquo;adresse IP locale de votre raspberry.</p>
<p>&nbsp;</p>
<h3>Script pour ne pas utiliser DynDNS</h3>
<p>Chez SFR, l&rsquo;adresse IP de votre box change régulièrement, et il est possible de souscrire à un service de DNS dynamique pour que l&rsquo;adresse <a href="javascript:void(0)">mon-rpi.dyndns.fr</a> redirige toujours vers votre box. Seulement je n&rsquo;ai pas réussi ! Il faut normalement aller dans l&rsquo;onglet DynDNS de la section Réseau de l&rsquo;interface de la box, mais le dervide dyndns.fr n&rsquo;est pas présent, et donc j&rsquo;ai préféré m&rsquo;en passer pour l&rsquo;instant.</p>
<p>Pour ne pas être bloqué, on m&rsquo;a soufflé l&rsquo;idée suivante : faire un script qui vérifie si l&rsquo;adresse IP a changée, si oui le script doit m&rsquo;envoyer un mail avec la nouvelle adresse IP. Puis il suffit de faire s&rsquo;exécuter ce script automatiquement à intervalles réguliers.</p>
<h4>Le script</h4>
<p>On va mettre le script dans le répertoire <code>/usr/local/bin/ipcheck.sh</code> :</p>
<pre class="brush:bash">#!/bin/bash
IPFILE=/etc/ipaddress

CURRENT_IP=$(curl ipogre.com)

MAIL_TO=votre_adresse@domaine.fr

if [ -f $IPFILE ]; then
	KNOWN_IP=$(cat $IPFILE)
	else
	KNOWN_IP=
fi

if [ "$CURRENT_IP" != "$KNOWN_IP" ]; then
	echo $CURRENT_IP &gt; $IPFILE

	MAIL_SUBJECT="L'adresse IP du RPI a changé !"
	MAIL_BODY="C'est maintenant $CURRENT_IP"

	echo $MAIL_BODY | mail -s "$MAIL_SUBJECT" $MAIL_TO
	logger -t ipcheck -- Nouvelle adresse IP : $CURRENT_IP
else
	logger -t ipcheck -- Même adresse IP.
fi
</pre>
<p>Donc l&rsquo;adresse IP va être stockée dans le fichier <code>/etc/ipaddress</code> et on utilise le site <a href="http://www.ipogre.com" target="_blank">ipogre.com</a> pour récupérer l&rsquo;adresse externe. Puis on compare l&rsquo;ancienne adresse avec la courante, et si ce n&rsquo;est pas la même, on envoie le mail. Voyons maintenant ce qu&rsquo;il faut installer et configurer pour que tout marche bien.</p>
<h4>Installation curl</h4>
<p>Je ne sais plus s&rsquo;il est installé de base dans Raspbian, dans le doute :</p>
<pre class="brush:bash">	sudo apt-get install curl
</pre>
<h4>Envoi de mail</h4>
<p>La partie qui risque de poser problème concerne l&rsquo;envoi de mail. Car la commande <code>mail</code> ne fait qu&rsquo;appeler le <a title="Définition de MTA" href="https://fr.wikipedia.org/wiki/Mail_Transfer_Agent" target="_blank">MTA</a> installé localement. J&rsquo;ai opté pour <a title="Page du paquet Debian" href="http://wiki.debian.org/sSMTP" target="_blank"><code>ssmtp</code></a> qui est très simple à installer et configurer :</p>
<pre class="brush:bash">sudo apt-get install ssmtp
</pre>
<p>Je l&rsquo;ai configurer pour utilisé mon compte Gmail pour les envois. Il faut alors éditer le fichier <code>/etc/ssmtp/ssmtp.conf</code> pour modifier les lignes suivantes :</p>
<pre class="brush:plain">mailhub=smtp.gmail.com:587
UseTLS=Yes
UseSTARTTLS=Yes
AuthUser=votre_login_gmail
AuthPass=votre_mot_de_passe_gmail
</pre>
<p><strong>Attention</strong>, votre mot de passe Gmail n&rsquo;est pas crypté, il faut donc s&rsquo;assurer que le fichier ne sera pas lisible par n&rsquo;importe qui ! :</p>
<pre class="brush:bash">sudo chmod 640 /etc/ssmtp/ssmtp.conf
sudo chown root:mail /etc/ssmtp/ssmtp.conf
</pre>
<h4>Cron du script</h4>
<p>On va &laquo;&nbsp;croner&nbsp;&raquo; ce script pour qu&rsquo;il s&rsquo;exécute automatiquement toutes les heures. Comme il n&rsquo;y a que l&rsquo;utilisateur <code>root</code> (cf. le <code>chown</code> à l&rsquo;étape précédente), il faut ajouter la tâche en sudo :</p>
<pre class="brush:bash">	sudo crontab -e
</pre>
<p>Et ajouter la ligne suivante :</p>
<pre class="brush:bash">0 * * * * /usr/local/bin/ipcheck.sh &gt;/dev/null 2&gt;&amp;1
</pre>
<p>Voilà ! Maintenant, toutes les heures, votre RPi vérifiera que son adresse IP externe n&rsquo;a pas changée. Si elle a en effet changée, il vous enverra un e-mail pour vous donner la nouvelle adresse. Vous pourrez également voir le log dans le fichier <code>/var/log/user.log</code>, en utilisant la commande <code>tail</code> par exemple.</p>
<h3>Conclusion</h3>
<p>Bien sûr, le gros problème avec cette solution (sans DNS dynamique), est qu&rsquo;il vous faudra prévenir vos amis à chaque changement d&rsquo;adresse IP ! Ce n&rsquo;est bien sûr pas une solution viable pour un vrai site (mais fait uniquement pour partager avec des amis), et il faudra alors songer à acheter un vrai nom de domaine, associé à une solution de DNS dynamique.</p>
<div>
<p class="beforelist"><strong>Sources (en anglais&#8230;) :</strong></p>
<ul>
<li><a href="http://www.penguintutor.com/linux/raspberrypi-webserver" target="_blank">Installation serveur web sur Raspberry Pi</a></li>
<li><a href="http://ubuntuforums.org/archive/index.php/t-526176.html" target="_blank">Récupérer son adresse IP externe depuis le terminal, et script pour l&rsquo;envoi d&rsquo;un mail si modifiée</a></li>
<li><a href="http://assistance.sfr.fr/internet_box-nb4/connexion/hebergement-site-web-box/fc-462-73201" target="_blank">Serveur web derrière box SFR</a></li>
<li><a href="http://assistance.sfr.fr/internet_box-nb4/emails-avec-sfr/desactiver-filtrage-smtp/fc-2491-69602" target="_blank">Autoriser l&rsquo;envoi de mail derrière votre box SFR</a></li>
<li><a href="http://stackoverflow.com/questions/9168432/unix-standard-directory-to-put-custom-executables-or-scripts" target="_blank">Où placer ces exécutables perso ?</a></li>
</ul>
</div>
<p>N&rsquo;hésitez pas à me faire part de toute remarques / corrections / erreurs !</p>]]></content:encoded>
			<wfw:commentRss>http://clementgrimal.fr/blog/2013/01/24/raspberry-pi-serveur-web-sfr-box/feed/</wfw:commentRss>
		<slash:comments>6</slash:comments>
		</item>
		<item>
		<title>Courts métrages de science-fiction</title>
		<link>http://clementgrimal.fr/blog/2013/01/23/courts-metrages-science-fiction/</link>
		<comments>http://clementgrimal.fr/blog/2013/01/23/courts-metrages-science-fiction/#comments</comments>
		<pubDate>Wed, 23 Jan 2013 19:00:25 +0000</pubDate>
		<dc:creator><![CDATA[Clément]]></dc:creator>
				<category><![CDATA[Non classé]]></category>
		<category><![CDATA[culture]]></category>
		<category><![CDATA[reportage]]></category>
		<category><![CDATA[science-fiction]]></category>
		<category><![CDATA[videos]]></category>

		<guid isPermaLink="false">http://clementgrimal.fr/blog/?p=75</guid>
		<description><![CDATA[Petite session Science-fiction avec trois courts métrages qui valent le détour. Et pour aller plus loin, si ce type d&#8217;anticipation et de réflexion sur le trans-humanisme vous intéresse, il y a eu un excellent Thema d&#8217;ARTE en Octobre 2012 là-dessus&#160;: Un monde sans humains ? Louer ou acheter le reportage en VOD Projet web Resistance [&#8230;]]]></description>
				<content:encoded><![CDATA[<div>
<p class="beforelist">
Petite session Science-fiction avec trois courts métrages qui valent le détour. Et pour aller plus loin, si ce type d&rsquo;anticipation et de réflexion sur le trans-humanisme vous intéresse, il y a eu un excellent Thema d&rsquo;ARTE en Octobre 2012 là-dessus&nbsp;:
</p>
<ul>
<li><a href="http://www.arte.tv/fr/un-monde-sans-humains/6968786.html" target="_blank">Un monde sans humains ?</a></li>
<li><a href="http://www.artevod.com/un_monde_sans_humains" target="_blank">Louer ou acheter le reportage en VOD</a></li>
<li><a href="http://resistance-2031.arte.tv/" target="_blank">Projet web Resistance 2031</a></li>
</ul>
</div>
<h3 style="text-align: center">Plurality</h3>
<div style="text-align: center"><iframe allowfullscreen="allowfullscreen" frameborder="0" height="315" src="http://www.youtube.com/embed/IzryBRPwsog?rel=0" width="560"></iframe></div>
<h3 style="text-align: center">Sight</h3>
<div style="text-align: center"><iframe allowfullscreen="allowfullscreen" frameborder="0" height="315" mozallowfullscreen="mozallowfullscreen" src="http://player.vimeo.com/video/46304267" webkitallowfullscreen="webkitallowfullscreen" width="560"></iframe></div>
<h3 style="text-align: center">Tears of Steel</h3>
<div style="text-align: center"><iframe allowfullscreen="allowfullscreen" frameborder="0" height="315" src="http://www.youtube.com/embed/R6MlUcmOul8?rel=0" width="560"></iframe></div></p>]]></content:encoded>
			<wfw:commentRss>http://clementgrimal.fr/blog/2013/01/23/courts-metrages-science-fiction/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>Convertir une série d&#8217;images en pdf</title>
		<link>http://clementgrimal.fr/blog/2013/01/22/conversion-jpg-png-pdf/</link>
		<comments>http://clementgrimal.fr/blog/2013/01/22/conversion-jpg-png-pdf/#comments</comments>
		<pubDate>Tue, 22 Jan 2013 20:00:43 +0000</pubDate>
		<dc:creator><![CDATA[Clément]]></dc:creator>
				<category><![CDATA[Non classé]]></category>
		<category><![CDATA[outils]]></category>
		<category><![CDATA[tutoriel]]></category>

		<guid isPermaLink="false">http://clementgrimal.fr/blog/?p=47</guid>
		<description><![CDATA[Si comme moi, vous scannez à tout va les documents importants (ou pas) dont vous pensez avoir besoin plus tard, vous avez surement rencontré le problème de la configuration du scanner utilisé&#8230; Scanné au format jpg ? Au format pdf ? pdf bien sûr ! Mais surtout, si votre document fait plusieurs pages, vous ne [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Si comme moi, vous scannez à tout va les documents importants (ou pas) dont vous pensez avoir besoin plus tard, vous avez surement rencontré le problème de la configuration du scanner utilisé&#8230;</p>
<p>Scanné au format jpg ? Au format pdf ? pdf bien sûr ! Mais surtout, si votre document fait plusieurs pages, vous ne voulez qu&rsquo;un seul fichier pdf à la fin.</p>
<p>Si vous êtes sous Ubuntu (ou une autre distribution similaire de votre préférence), il suffit d&rsquo;installer ImageMagick (<code>sudo apt-get install imagemagick</code> par exemple) !</p>
<p>Une fois installé, cet utilitaire très pratique vous permet de faire tout ça, en une seule commande très simple. Si vos images sont dans le dossier <code>/mon/dossier/</code>, il vous suffit de faire :</p>
<pre class="brush:bash">cd /mon/dossier/
convert *.jpg fichier_multi_pages.pdf</pre>
<p>Si en plus, les images étaient scannées en trop bonne qualité et que vous ne souhaitez pas gâcher votre espace disque, vous pouvez ajouter un paramètre à la commande pour réduire leur taille :</p>
<pre class="brush:bash">convert *.jpg -resize 50% fichier_multi_pages.pdf</pre>

<p>Bref, dès lors qu&rsquo;il s&rsquo;agit de manipuler des images, <strong>ImageMagick</strong> se révèle fort utile, et ce billet ne présente qu&rsquo;un exemple d&rsquo;utilisation parmi bien d&rsquo;autres !</p>
<div><p class="beforelist"><strong>Sources :</strong></p>
<ul>
<li><a href="http://www.aide-ubuntu.com/Convertir-une-serie-d-images-JPEG,33">http://www.aide-ubuntu.com/Convertir-une-serie-d-images-JPEG,33</a></li>
<li><a href="http://www.imagemagick.org/script/convert.php">Le manuel de la commande <code>convert</code></a></li>
</ul>
</div>
]]></content:encoded>
			<wfw:commentRss>http://clementgrimal.fr/blog/2013/01/22/conversion-jpg-png-pdf/feed/</wfw:commentRss>
		<slash:comments>4</slash:comments>
		</item>
		<item>
		<title>Film : Django Unchained</title>
		<link>http://clementgrimal.fr/blog/2013/01/21/film-django-unchained/</link>
		<comments>http://clementgrimal.fr/blog/2013/01/21/film-django-unchained/#comments</comments>
		<pubDate>Mon, 21 Jan 2013 22:48:26 +0000</pubDate>
		<dc:creator><![CDATA[Clément]]></dc:creator>
				<category><![CDATA[Non classé]]></category>
		<category><![CDATA[cinema]]></category>
		<category><![CDATA[culture]]></category>
		<category><![CDATA[musique]]></category>

		<guid isPermaLink="false">http://clementgrimal.fr/blog/?p=96</guid>
		<description><![CDATA[En voyant le dernier Tarantino, on ne peut que savourer son inimitable patte. De l&#8217;hémoglobine, mais une violence burlesque (tout comme certaines scènes) omniprésente. Mais ce qui reste pour moi le plus agréable, c&#8217;est cette avalanche de dialogues ciselés pour Christopher Waltz (Dr Shultz) et Leonardo DiCaprio (Calvin Candy) en particulier. Bref, on se régale, [&#8230;]]]></description>
				<content:encoded><![CDATA[<p><img src="http://clementgrimal.fr/blog/wp-content/uploads/2013/01/test1-300x192.jpg" alt="Affiche de Django Unchained" width="291" height="181" class="alignleft size-medium wp-image-133" /></p>
<p>
En voyant le dernier Tarantino, on ne peut que savourer son inimitable patte. De l&rsquo;hémoglobine, mais une violence burlesque (tout comme certaines scènes) omniprésente. Mais ce qui reste pour moi le plus agréable, c&rsquo;est cette avalanche de dialogues ciselés pour Christopher Waltz (Dr Shultz) et Leonardo DiCaprio (Calvin Candy) en particulier.
</p>
<p>
Bref, on se régale, on jubile même. Mais si on voulait vraiment être critique, en oubliant qu&rsquo;on aime tous les films de Tarantino&#8230; (attention, je déconseille la suite de la lecture si vous n&rsquo;avez pas encore vu ce superbe film !)
</p>

<div class='easySpoilerWrapper' style=''>
<table class='easySpoilerTable' border='0' style='text-align:center;' align='center' bgcolor='FFFFFF' >

<tr style='white-space:normal;'>
<th class='easySpoilerTitleA' style='white-space:normal;font-weight:normal;text-align:left;vertical-align:middle;font-size:120%;'><a href='' onclick='wpSpoilerToggle("spoilerDiv4cfd8001",true,"Voir quand même","Masquer","fast",false); return false;' onselectstart='return false;' style='text-decoration: none;'>Spoiler Inside</a></th>
<th class='easySpoilerTitleB'style='padding:0px;text-align:right;vertical-align:middle;font-size:100%; white-space:nowrap;'><a href=''  class='easySpoilerButton' style='font-size:100%;display:none; margin: 3px 0px 3px; padding: 4px; ' align='right'>Sélectionner</a><a href=''  id='spoilerDiv4cfd8001_action' class='easySpoilerButtonBare' value="Voir quand même" align='right' style='font-size:100%;display:none; margin: 3px 0px 3px 5px; padding: 4px;'>Voir quand même</></th>
</tr>
<tr><td class='easySpoilerRow' colspan='2' style=''><div id='spoilerDiv4cfd8001' class='easySpoilerSpoils'  style='display:none; white-space:wrap; overflow:auto; vertical-align:middle;'>
</p>
<p>
Bon honnêtement, je n&rsquo;ai pas vraiment été surpris, on devine le plus souvent ce qu&rsquo;il va se passer, et surtout on est rarement inquiet pour les personnages principaux. Par exemple, quand à la fin Django qui vient finalement (après plus de 2h !) de retrouver l&rsquo;amour de sa vie, va régler leur compte aux derniers pas-beaux encore vivants, je n&rsquo;ai pas pu m&rsquo;empêcher de penser à Heat, quand Robert de Niro qui pourrait s&rsquo;enfuir souhaite aller revoir sa chérie une dernière fois, et se fait alors intercepter par Al Pacino qui l&rsquo;abat&#8230; Dans Django Unchained, beaucoup moins de tension, on sait que ça va bien se passer et qu&rsquo;il va aller retrouver sa belle après avoir terminer le ménage !
</p>
<p>
Mais bon attention, ça reste pour moi un excellent film, un divertissement incomparable, et je ne peux que le recommander !!!
</p>
<p>
</div></td></tr>
</table>
<div class='easySpoilerConclude' style=''><table class='easySpoilerTable' border='0' style='text-align:center;' frame='box' align='center' bgcolor='FFFFFF'><tr><th class='easySpoilerEnd' style='width:100%;'></th><td class='easySpoilerEnd' style='white-space:nowrap;' colspan='2'></td></tr><tr><td class='easySpoilerGroupWrapperLastRow' colspan='2' style=''></td></tr></table></div>
</div>

<p>
J&rsquo;ai juste oublier de dire qu&rsquo;une fois de plus, la bande originale du film est géniale (même si elle manque de jazz manouche) ! Elle est d&rsquo;ailleurs en  écoute gratuite sur  Grooveshark&nbsp;: <a href="http://grooveshark.com/album/Quentin+Tarantino+and+number+x27+s+Django+Unchained+Original+Motion+Picture+Soundtrack/8572596">Django Unchained Original Motion Picture Soundtrack</a>, et pour l&rsquo;acheter vous trouverez tout sur cette page : <a href="http://www.unchainedsoundtrack.com/">http://www.unchainedsoundtrack.com</a>
</p>
<p>
J&rsquo;ai en particulier aimer celle de John Legend : &laquo;&nbsp;Who Did That To You?&nbsp;&raquo; que je n&rsquo;ai trouvé que sur grooveshark :
</p>
<p><object width="600" height="40" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="gsSong3787288797" name="gsSong3787288797"><param name="movie" value="http://grooveshark.com/songWidget.swf" /><param name="wmode" value="window" /><param name="allowScriptAccess" value="always" /><param name="flashvars" value="hostname=grooveshark.com&#038;songID=37872887&#038;style=metal&#038;p=0" /><object type="application/x-shockwave-flash" data="http://grooveshark.com/songWidget.swf" width="600" height="40"><param name="wmode" value="window" /><param name="allowScriptAccess" value="always" /><param name="flashvars" value="hostname=grooveshark.com&#038;songID=37872887&#038;style=metal&#038;p=0" /><span><a href="http://grooveshark.com/search/song?q=John%20Legend%20Who%20Did%20That%20to%20You%3F" title="Who Did That to You? by John Legend on Grooveshark">Who Did That to You? by John Legend on Grooveshark</a></span></object></object></p>]]></content:encoded>
			<wfw:commentRss>http://clementgrimal.fr/blog/2013/01/21/film-django-unchained/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>Comment connecter un smartphone sous Android 4.1 à Ubuntu ?</title>
		<link>http://clementgrimal.fr/blog/2013/01/20/smartphone-android-ubuntu-mtp/</link>
		<comments>http://clementgrimal.fr/blog/2013/01/20/smartphone-android-ubuntu-mtp/#comments</comments>
		<pubDate>Sun, 20 Jan 2013 18:13:15 +0000</pubDate>
		<dc:creator><![CDATA[Clément]]></dc:creator>
				<category><![CDATA[Non classé]]></category>
		<category><![CDATA[android]]></category>
		<category><![CDATA[mtp]]></category>
		<category><![CDATA[tutoriel]]></category>
		<category><![CDATA[ubuntu]]></category>

		<guid isPermaLink="false">http://clementgrimal.fr/blog/?p=69</guid>
		<description><![CDATA[Les téléphones sous Android 4.1 &#171;&#160;Jelly Beans&#160;&#187; (c&#8217;est même le cas depuis Android 3 apparemment) qui n&#8217;ont pas de carte mémoire SD, et donc une seule partition, comme par exemple le Google Samsung Galaxy Nexus (héhé), ne fonctionnent plus comme des clés usb lorsqu&#8217;on les relie à un ordinateur. En effet, ce système a été abandonné sur ces [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Les téléphones sous Android 4.1 <i>&laquo;&nbsp;Jelly Beans&nbsp;&raquo;</i> (c&rsquo;est même le cas depuis Android 3 apparemment)<i> </i>qui n&rsquo;ont pas de carte mémoire SD, et donc une seule partition, comme par exemple le Google Samsung Galaxy Nexus (héhé), ne fonctionnent plus comme des clés usb lorsqu&rsquo;on les relie à un ordinateur.</p>
<p>En effet, ce système a été abandonné sur ces appareils, et Google a fait le choix du protocole MTP <i>&laquo;&nbsp;Media Transfer Protocol&nbsp;&raquo;</i> qui fonctionne en natif sous Windows (et aussi sous MacOS bien que je n&rsquo;ai pas vérifié). En revanche, sous Ubuntu, c&rsquo;est une toute autre histoire !</p>
<p>Comme je n&rsquo;ai pas trouvé de tutoriel en français, je me propose de traduire ceux que j&rsquo;ai utilisé pour accéder à la mémoire de mon téléphone sous Ubuntu (cela doit <i> a priori</i> également fonctionner sous d&rsquo;autres distributions Unix).</p>
<p>Dans les étapes suivantes, je suppose que vous avez <code>vim</code> d&rsquo;installé, si ce n&rsquo;est pas le cas, votre éditeur de texte préféré fera l&rsquo;affaire.</p>
<ol>
<li>Installez les paquets <code>mtp-tools</code> et <code>mtpfs</code> :
<pre class="brush:bash">sudo apt-get install mtp-tools mtpfs</pre>
</li>
<li style="margin-top: 20px;">Connectez votre téléphone avec le câble usb.</li>
<li style="margin-top: 20px;">Trouvez maintenant le <code>idVendor</code> et le <code>idProduct</code> de votre appareil :
<pre class="brush:bash">mtp-detect | grep idVendor
mtp-detect | grep idProduct</pre>
</li>
<li style="margin-top: 20px;">Créez (ou éditez) maintenant le fichier permettant d&rsquo;ajouter une règle pour que Ubuntu puisse accéder à votre téléphone :
<pre class="brush:bash">sudo vim /etc/udev/rules.d/51-android.rules</pre>
<p>et ajoutez-y la ligne suivante :</p>
<pre class="brush:plain">SUBSYSTEM=="usb", ATTR{idVendor}=="04e8", ATTR{idProduct}=="6860", MODE="0666"</pre>
<p>en remplaçant <code>{idVendor}</code> et <code>{idProduct}</code> par les valeurs trouvées à l&rsquo;étape précédente.</p>
</li>
<li style="margin-top: 20px;">Pour appliquer la règle, il faut relancer <code><code>udev<code> :</code></code></code>
<pre class="brush:bash">sudo service udev restart</pre>
</li>
<li style="margin-top: 20px;">Créez maintenant le répertoire dans lequel sera monter votre téléphone :
<pre class="brush:bash">sudo mkdir /media/nexus
sudo chmod a+rwx /media/nexus</pre>
</li>
<li style="margin-top: 20px;">Ajoutez votre nom d&rsquo;utilisateur au groupe <code>fuse</code> :
<pre class="brush:bash">sudo adduser {utilisateur} fuse</pre>
<p>en remplaçant <code>{utilisateur}</code> par votre nom d&rsquo;utilisateur.</p>
</li>
<li style="margin-top: 20px;">Enlever le <code>#</code> de la dernière ligne du fichier <code>/etc/fuse.conf</code> (s&rsquo;il est présent) :
<pre class="brush:bash">sudo vim /etc/fuse.conf</pre>
</li>
<li style="margin-top: 20px;">Créez les deux alias suivants pour vous permettre de facilement connecter et déconnecter votre téléphone :
<pre class="brush:bash">echo "alias android-connect=\"mtpfs -o allow_other /media/nexus\"" &gt;&gt; ~/.bashrc
echo "alias android-disconnect=\"fusermount -u /media/nexus\"" &gt;&gt; ~/.bashrc
source ~/.bashrc</pre>
</li>
<li style="margin-top: 20px;">Redémarrez votre ordinateur.</li>
<li style="margin-top: 20px;">Vérifiez que votre téléphone est bien reliez en usb à votre ordinateur, et connectez-le avec la commande :
<pre class="brush:bash">android-connect</pre>
</li>
<li style="margin-top: 20px;">Vous pouvez maintenant accéder à la mémoire interne de votre téléphone dans le répertoire <code>/media/nexus/</code></li>
<li style="margin-top: 20px;">Pour le déconnecter :
<pre class="brush:bash">android-disconnect</pre>
</li>
</ol>
<p>Voilà c&rsquo;est terminé ! C&rsquo;était laborieux mais maintenant, il vous suffit d&rsquo;utiliser ces deux commandes pour facilement accéder à la mémoire de votre beau téléphone. En espérant tout de même qu&rsquo;une solution plus simple soit disponible dans les futures versions d&rsquo;Ubuntu&#8230;</p>
<div>
<p class="beforelist"><strong>Sources :</strong></p>
<ul>
<li><a href="http://www.omgubuntu.co.uk/2011/12/how-to-connect-your-android-ice-cream-sandwich-phone-to-ubuntu-for-file-access">http://www.omgubuntu.co.uk/2011/12/how-to-connect-your-android-ice-cream-sandwich-phone-to-ubuntu-for-file-access</a></li>
<li><a href="http://shkspr.mobi/blog/index.php/2012/01/connecting-samsung-ics-to-ubuntu-using-mtp/">http://shkspr.mobi/blog/index.php/2012/01/connecting-samsung-ics-to-ubuntu-using-mtp/</a></li>
</ul>
</div>]]></content:encoded>
			<wfw:commentRss>http://clementgrimal.fr/blog/2013/01/20/smartphone-android-ubuntu-mtp/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>Sur les épaules de Darwin</title>
		<link>http://clementgrimal.fr/blog/2013/01/17/sur-les-epaules-de-darwin/</link>
		<comments>http://clementgrimal.fr/blog/2013/01/17/sur-les-epaules-de-darwin/#comments</comments>
		<pubDate>Thu, 17 Jan 2013 19:50:37 +0000</pubDate>
		<dc:creator><![CDATA[Clément]]></dc:creator>
				<category><![CDATA[Non classé]]></category>
		<category><![CDATA[culture]]></category>
		<category><![CDATA[darwin]]></category>
		<category><![CDATA[geekeries]]></category>
		<category><![CDATA[radio]]></category>
		<category><![CDATA[raspberry-pi]]></category>
		<category><![CDATA[science]]></category>

		<guid isPermaLink="false">http://clementgrimal.fr/blog/?p=42</guid>
		<description><![CDATA[Tous les samedis matins de 11h à 12h sur France Inter, est diffusée une émission de vulgarisation scientifique formidable &#171;&#160;Sur les épaules de Darwin&#160;&#187; présentée par le biologiste Jean-Claude Ameisen. Cette émission n&#8217;est pas réservée aux scientifiques car les sujets sont abordés de façon très simple. La voix de Jean-Claude Ameisen est totalement envoûtante, associée [&#8230;]]]></description>
				<content:encoded><![CDATA[<p><img class="alignleft" alt="" src="http://media.tumblr.com/tumblr_m9sdy9GfqU1qiol4t.jpg" width="128" height="128" />
<p>Tous les samedis matins de 11h à 12h sur France Inter, est diffusée une émission de vulgarisation scientifique formidable &laquo;&nbsp;Sur les épaules de Darwin&nbsp;&raquo; présentée par le biologiste Jean-Claude Ameisen.</p>
<p>Cette émission n&rsquo;est pas réservée aux scientifiques car les sujets sont abordés de façon très simple. La voix de Jean-Claude Ameisen est totalement envoûtante, associée au rythme de l&rsquo;émission plutôt posé, elle vous fera certainement voyager !
</p>
<p>
Comme toutes les émissions de France Inter, vous pouvez ré-écouter (ou télécharger) les émissions déjà diffusées. À ce propos, comme il n&rsquo;est pas facilement possible de télécharger les émissions passées depuis plus de 2 mois (et qui ne sont plus dans le RSS), j&rsquo;ai créé plusieurs petits programmes (en python) qui récupèrent toutes les infos sur les émissions (date, titre, etc.) et récupèrent les liens pour ré-écouter ou télécharger ces émissions. À partir de toutes ces infos, je génère une simple page web pour partager de façon simple ces précieuses informations : <a href="http://clementgrimal.fr/darwin/">http://clementgrimal.fr/darwin/</a>
</p>
<p>
Vous pouvez donc y ré-écouter et télécharger vos épisodes préférés de cette formidable émission. Si vous êtes intéressé par ces programmes, je peux vous les transmettre, et je pense de toute façon les mettre sur une plate-forme de partage (comme GitHub) prochainement.
</p>
<p>
De plus, comme je viens de recevoir mon Raspberry Pi (un petit ordinateur pas cher : <a href="https://fr.wikipedia.org/wiki/Raspberry_Pi">page Wikipedia</a>), j&rsquo;ai automatisé la mise à jour de cette page web, donc elle sera toujours à jour, même si je suis en vacances !
</p>
<p>
Bon je pense que le sujet de ce billet a pas mal dérivé&#8230; J&rsquo;en écrirai probablement d&rsquo;autres pour parler plus des programmes Python et de l&rsquo;utilisation de mon Raspberry Pi !
</p>
<p>
Ce qu&rsquo;il faut retenir, c&rsquo;est que si j&rsquo;ai fait tout ces efforts, c&rsquo;est que cette émission le mérite amplement, tant elle est passionnante. Donc si vous ne la connaissez pas et que vous aimez la vulgarisation scientifique : foncez !
</p>
<p>
Toutes les informations, et les liens vers le site de l&rsquo;émission sur France Inter sont<br />
sur ma page&nbsp;: <a href="http://clementgrimal.fr/darwin/">http://clementgrimal.fr/darwin/</a></p>
]]></content:encoded>
			<wfw:commentRss>http://clementgrimal.fr/blog/2013/01/17/sur-les-epaules-de-darwin/feed/</wfw:commentRss>
		<slash:comments>3</slash:comments>
		</item>
		<item>
		<title>Bonjour tout le monde&#160;!</title>
		<link>http://clementgrimal.fr/blog/2013/01/16/bonjour-tout-le-monde/</link>
		<comments>http://clementgrimal.fr/blog/2013/01/16/bonjour-tout-le-monde/#comments</comments>
		<pubDate>Wed, 16 Jan 2013 19:33:04 +0000</pubDate>
		<dc:creator><![CDATA[Clément]]></dc:creator>
				<category><![CDATA[Non classé]]></category>
		<category><![CDATA[blog]]></category>

		<guid isPermaLink="false">http://clementgrimal.fr/blog/?p=1</guid>
		<description><![CDATA[C&#8217;est parti pour le lancement de mon énième blog ! Mais attention cette fois ci, j&#8217;y crois ! Si vous voulez en savoir un peu plus sur moi et surtout sur ce blog, direction la page À propos. En résumé, je compte me servir de ce blog pour partager des solutions à des problèmes que j&#8217;ai rencontré [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>
C&rsquo;est parti pour le lancement de mon énième blog ! Mais attention cette fois ci, j&rsquo;y crois !
</p>
<p>
Si vous voulez en savoir un peu plus sur moi et surtout sur ce blog, direction la page <a title="À propos" href="http://clementgrimal.fr/blog/a-propos/">À propos</a>. En résumé, je compte me servir de ce blog pour partager des solutions à des problèmes que j&rsquo;ai rencontré et qui risque fort de concerner le Javascript (et son compagnon jQuery) et autres joyeux langages. Il y a aura probablement d&rsquo;autres sujets geek car je viens de recevoir mon Raspberry Pi !!! Et puis de temps, je vous parlerai d&rsquo;un film ou d&rsquo;un livre qui m&rsquo;a régalé.
</p>
<p>
Pour la fréquence de publication, je n&rsquo;ai aucun idée de ce que cela pourra donner et il faudra probablement quelques temps pour que cela se stabilise !
</p>
<p>
Finalement, n&rsquo;hésitez pas à me retrouver sur Twitter&amp;Cie : <a title="Ailleurs sur le web" href="http://clementgrimal.fr/blog/ailleurs-sur-le-web/">Ailleurs sur le web</a>.</p>]]></content:encoded>
			<wfw:commentRss>http://clementgrimal.fr/blog/2013/01/16/bonjour-tout-le-monde/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
	</channel>
</rss>
